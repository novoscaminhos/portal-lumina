<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Lumina — Validação de Acesso</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      background: radial-gradient(circle at center, #020617, #000);
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center text-slate-200">

  <div class="max-w-md w-full bg-slate-900 rounded-2xl shadow-2xl p-8 text-center">

    <div class="flex justify-center mb-6">
      <img src="./assets/LOGO.png" alt="Lumina" class="h-16">
    </div>

    <h1 class="text-lg font-semibold tracking-wide mb-3">
      Validando Acesso
    </h1>

    <p class="text-sm text-slate-400 mb-6">
      Aguarde enquanto verificamos as condições de entrada.
    </p>

    <div class="flex justify-center">
      <div class="w-10 h-10 border-4 border-slate-600 border-t-red-700 rounded-full animate-spin"></div>
    </div>

    <p class="text-xs text-slate-500 mt-6">
      Lumina · Segurança de Acesso Ativa
    </p>

  </div>

<script>
  /**
   * ETAPA 2 — CONTROLE DE FLUXO
   */

  // Precisa ter vindo do botão "Acesso Completo" e ter um token gravado
  const accessType = localStorage.getItem('lumina_access_type');
  const token = localStorage.getItem('lumina_token');

  if (accessType !== 'full') {
    window.location.replace('./index.html');
  } else if (!token) {
    // Se é acesso completo mas não tem token, manda para o login
    window.location.replace('./login.html');
  }

  // Pequeno delay simbólico (psicológico + UX)
  setTimeout(() => {
    const termosAceitos = localStorage.getItem('lumina_terms_accepted');

    if (termosAceitos === 'true') {
      // Se já aceitou os termos anteriormente, vai para o Splash
      window.location.replace('./splash.html');
    } else {
      // Se não aceitou, vai para os termos
      window.location.replace('./termos.html');
    }
  }, 1200);
</script>

</body>
</html>
